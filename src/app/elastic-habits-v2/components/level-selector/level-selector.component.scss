/* Main Container - Cork Board */
.level-selector-container {
  width: 100%;
  max-width: 380px;
  background:
    /* Małe, świeże dziurki - mniej zniszczona */
    radial-gradient(circle 2px at 22% 18%, rgba(160, 140, 115, 0.25) 30%, transparent 50%),
    radial-gradient(circle 1px at 78% 25%, rgba(180, 155, 130, 0.3) 35%, transparent 55%),
    radial-gradient(circle 3px at 45% 75%, rgba(160, 140, 115, 0.2) 25%, transparent 45%),
    radial-gradient(circle 1px at 85% 85%, rgba(180, 155, 130, 0.35) 40%, transparent 60%),
    radial-gradient(circle 2px at 15% 65%, rgba(160, 140, 115, 0.28) 30%, transparent 50%),

      /* Delikatne wgniecenia - subtelne */
    radial-gradient(ellipse 20px 12px at 30% 40%, rgba(200, 180, 155, 0.12) 35%, transparent 75%),
    radial-gradient(ellipse 15px 25px at 70% 65%, rgba(220, 200, 175, 0.1) 30%, transparent 70%),
    radial-gradient(ellipse 25px 15px at 55% 20%, rgba(200, 180, 155, 0.08) 40%, transparent 80%),

      /* Świeże ziarna korka - jasne */
    radial-gradient(ellipse 2px 1px at 25% 35%, #e6d3b7 0%, transparent 65%),
    radial-gradient(ellipse 1px 3px at 65% 55%, #dcc9a3 0%, transparent 60%),
    radial-gradient(ellipse 3px 2px at 35% 80%, #e6d3b7 0%, transparent 65%),
    radial-gradient(ellipse 2px 2px at 80% 45%, #dcc9a3 0%, transparent 60%),
    radial-gradient(ellipse 1px 2px at 15% 25%, #e6d3b7 0%, transparent 65%),
    radial-gradient(ellipse 2px 1px at 90% 75%, #dcc9a3 0%, transparent 60%),

      /* Minimalne pęknięcia - świeża tablica */
    linear-gradient(115deg, transparent 48%, rgba(180, 155, 130, 0.15) 49%, rgba(180, 155, 130, 0.15) 50%, transparent 52%),
    linear-gradient(85deg, transparent 68%, rgba(200, 180, 155, 0.12) 69%, rgba(200, 180, 155, 0.12) 70%, transparent 72%),

      /* Jasny, świeży gradient korka */
    linear-gradient(135deg,
      #f8f0e3 0%,
      #f5deb3 20%,
      #f0e6d2 40%,
      #ede0c5 60%,
      #f2e8d0 80%,
      #f8f0e3 100%);

  background-size:
    60px 45px, 50px 40px, 70px 50px, 45px 35px, 65px 50px,
    35px 20px, 25px 35px, 40px 25px,
    12px 6px, 8px 18px, 15px 8px, 12px 10px, 6px 12px, 14px 6px,
    150px 1px, 200px 1px,
    100% 100%;

  /* Lekko nieregularny ale świeży kształt */
  border-radius:
    12px 14px 13px 15px /
    14px 12px 15px 13px;
  padding: 24px;
  position: relative;
  border: none;

  /* Świeże, delikatne cienie */
  box-shadow:
    /* Główny cień - mniej dramatyczny */
    0 6px 20px rgba(0, 0, 0, 0.08),
    0 2px 6px rgba(0, 0, 0, 0.05),
      /* Subtelne wgniecenia */
    inset -2px 0 5px rgba(160, 140, 115, 0.08),
    inset 2px 0 5px rgba(160, 140, 115, 0.08),
    inset 0 -2px 5px rgba(160, 140, 115, 0.06),
    inset 0 2px 5px rgba(160, 140, 115, 0.06),
      /* Delikatne wewnętrzne cienie */
    inset 0 0 15px rgba(180, 155, 130, 0.05);

  /* Świeża tekstura powierzchni */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      /* Niewielkie, świeże uszkodzenia */
      radial-gradient(ellipse 5px 8px at 18% 45%, rgba(180, 155, 130, 0.15) 0%, transparent 65%),
      radial-gradient(ellipse 6px 4px at 82% 60%, rgba(200, 180, 155, 0.12) 0%, transparent 60%),
      radial-gradient(ellipse 4px 6px at 38% 15%, rgba(180, 155, 130, 0.18) 0%, transparent 70%),

        /* Delikatne plamy - minimalne */
      radial-gradient(ellipse 25px 15px at 60% 35%, rgba(200, 180, 155, 0.04) 0%, transparent 75%),
      radial-gradient(ellipse 20px 30px at 25% 70%, rgba(220, 200, 175, 0.03) 0%, transparent 80%),
      radial-gradient(ellipse 30px 20px at 75% 25%, rgba(200, 180, 155, 0.035) 0%, transparent 85%);
    border-radius: inherit;
    pointer-events: none;
  }

  /* Świeże słoje i linie struktury */
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      /* Delikatne słoje - nowa tablica */
      linear-gradient(91deg, transparent 0%, rgba(180, 155, 130, 0.03) 1%, transparent 3%),
      linear-gradient(89deg, transparent 0%, rgba(200, 180, 155, 0.025) 1.5%, transparent 4%),
      linear-gradient(93deg, transparent 0%, rgba(180, 155, 130, 0.02) 0.8%, transparent 2.5%),
      linear-gradient(87deg, transparent 0%, rgba(200, 180, 155, 0.015) 2%, transparent 5%),

        /* Subtelne pionowe struktury */
      linear-gradient(1deg, transparent 0%, rgba(180, 155, 130, 0.02) 1%, transparent 2%),
      linear-gradient(179deg, transparent 0%, rgba(200, 180, 155, 0.015) 0.5%, transparent 1.5%);

    background-size:
      60px 100%, 75px 100%, 50px 100%, 90px 100%,
      100% 95px, 100% 115px;
    border-radius: inherit;
    pointer-events: none;
  }
}

/* Habit Header - Main sticky note */
.habit-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
  padding: 18px 20px;
  background: linear-gradient(145deg, #fef9c3 0%, #fbbf24 100%);
  border-radius: 4px;
  position: relative;
  transform: rotate(-1deg);

  /* Paper shadow and curl effect */
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.15),
    0 2px 6px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);

  /* Corner curl effect */
  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 20px;
    background: linear-gradient(315deg, rgba(0,0,0,0.1) 0%, transparent 50%);
    border-top-right-radius: 4px;
  }

  /* Paper texture */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 30% 70%, rgba(0,0,0,0.03) 0%, transparent 50%),
      radial-gradient(circle at 70% 30%, rgba(0,0,0,0.03) 0%, transparent 50%);
    border-radius: 4px;
    pointer-events: none;
  }
}

.habit-badge {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1.2rem;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255,255,255,0.2);
  position: relative;
  transform: rotate(2deg);
}

.habit-info {
  flex: 1;
}

.habit-name {
  font-size: 1.3rem;
  font-weight: 800;
  margin: 0 0 4px 0;
  color: #92400e;
  text-shadow: 0 1px 2px rgba(255,255,255,0.8);
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

.habit-subtitle {
  font-size: 0.85rem;
  color: #a16207;
  margin: 0;
  font-weight: 600;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

/* Levels Grid */
.levels-grid {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* Level Cards - Different colored sticky notes */
.level-card {
  background: var(--note-bg, linear-gradient(145deg, #dcfce7 0%, #bbf7d0 100%));
  border: 1px solid var(--note-border, #86efac);
  border-radius: 4px;
  padding: 18px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: visible;
  transform: var(--note-rotation, rotate(0.5deg));

  /* Sticky note shadow */
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 2px 4px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);

  /* Paper texture */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 25% 75%, rgba(0,0,0,0.02) 0%, transparent 50%),
      radial-gradient(circle at 75% 25%, rgba(0,0,0,0.02) 0%, transparent 50%);
    border-radius: 4px;
    pointer-events: none;
  }

  /* Corner fold effect */
  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 15px;
    height: 15px;
    background: linear-gradient(315deg, rgba(0,0,0,0.08) 0%, transparent 60%);
    border-top-right-radius: 4px;
  }
}

/* Different colors and rotations for each level */
.level-card:nth-child(1) {
  --note-bg: linear-gradient(145deg, #dcfce7 0%, #bbf7d0 100%);
  --note-border: #10b981;
  --note-rotation: rotate(-1.2deg);
}

.level-card:nth-child(2) {
  --note-bg: linear-gradient(145deg, #dbeafe 0%, #93c5fd 100%);
  --note-border: #3b82f6;
  --note-rotation: rotate(0.8deg);
}

.level-card:nth-child(3) {
  --note-bg: linear-gradient(145deg, #fef2f2 0%, #fecaca 100%);
  --note-border: #ef4444;
  --note-rotation: rotate(-0.5deg);
}

.level-card:hover {
  transform: var(--note-rotation, rotate(0.5deg)) translateY(-6px) scale(1.02);
  box-shadow:
    0 12px 30px rgba(0, 0, 0, 0.18),
    0 6px 12px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
  z-index: 10;
}

.level-card.selected {
  transform: var(--note-rotation, rotate(0.5deg)) translateY(-3px) scale(1.01);
  box-shadow:
    0 8px 25px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    0 0 0 2px var(--level-color),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
  z-index: 5;
}

/* Push pin effect for selected card */
.level-card.selected .level-indicator::after {
  content: '';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 12px;
  height: 12px;
  background: radial-gradient(circle, var(--level-color) 30%, transparent 70%);
  border-radius: 50%;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 2px rgba(255, 255, 255, 0.3);
}

/* Level Header */
.level-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.level-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.level-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.level-title {
  flex: 1;
  font-size: 1.1rem;
  font-weight: 700;
  margin: 0;
  color: #374151;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  text-shadow: 0 1px 2px rgba(255,255,255,0.8);
}

.selection-badge {
  width: 24px;
  height: 24px;
  background: var(--level-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  box-shadow:
    0 3px 8px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  transform: rotate(-5deg);
}

/* Progress Section */
.progress-section {
  margin-bottom: 14px;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.progress-text {
  font-size: 0.85rem;
  color: #6b7280;
  font-weight: 600;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

.progress-value {
  font-size: 0.85rem;
  font-weight: 800;
  color: #374151;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

.progress-bar {
  height: 8px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 4px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.progress-details {
  display: flex;
  justify-content: flex-end;
}

.days-count {
  font-size: 0.75rem;
  color: #6b7280;
  font-weight: 700;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

/* Description Area */
.description-area {
  border-top: 1px dashed rgba(0, 0, 0, 0.1);
  padding-top: 10px;
  margin-top: 2px;
}

.description-edit {
  display: flex;
  align-items: center;
}

.description-input {
  flex: 1;
  padding: 8px 10px;
  border: 2px solid rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  font-size: 0.8rem;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.7);
  font-family: 'Comic Sans MS', cursive, sans-serif;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
}

.description-input:focus {
  outline: none;
  border-color: var(--level-color, #3b82f6);
  background: rgba(255, 255, 255, 0.9);
  box-shadow:
    inset 0 1px 2px rgba(0, 0, 0, 0.05),
    0 0 0 2px rgba(59, 130, 246, 0.2);
}

.description-display {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  border: 1px dashed rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.3);
}

.description-display:hover {
  border-color: var(--level-color);
  background: rgba(255, 255, 255, 0.6);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.edit-icon {
  color: #9ca3af;
  transition: color 0.2s ease;
}

.description-display:hover .edit-icon {
  color: var(--level-color);
}

.description-text {
  font-size: 0.8rem;
  color: #6b7280;
  font-style: italic;
  transition: color 0.2s ease;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

.description-display:hover .description-text {
  color: #374151;
}

/* Tape effect for some cards */
.level-card:nth-child(2)::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 20px;
  width: 40px;
  height: 16px;
  background: linear-gradient(145deg, rgba(255,255,255,0.8) 0%, rgba(230,230,230,0.8) 100%);
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}

/* Responsive */
@media (max-width: 768px) {
  .level-selector-container {
    max-width: 100%;
    padding: 16px;
  }

  .habit-header {
    padding: 14px 16px;
  }

  .level-card {
    padding: 14px;
  }
}

/* Animations with more natural movement */
.level-card {
  animation: floatIn 0.6s ease-out backwards;
}

.level-card:nth-child(1) { animation-delay: 0.1s; }
.level-card:nth-child(2) { animation-delay: 0.2s; }
.level-card:nth-child(3) { animation-delay: 0.3s; }

@keyframes floatIn {
  from {
    opacity: 0;
    transform: var(--note-rotation, rotate(0.5deg)) translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: var(--note-rotation, rotate(0.5deg)) translateY(0) scale(1);
  }
}

/* Focus states for accessibility */
.level-card:focus {
  outline: 2px solid var(--level-color);
  outline-offset: 4px;
}

.description-input:focus,
.description-display:focus {
  outline: 2px solid var(--level-color);
  outline-offset: 2px;
}
